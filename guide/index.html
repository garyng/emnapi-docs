<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>What is emnapi | emnapi</title>
    <meta name="description" content="emnapi - The Subset of Node-API implementation for Emscripten">
    <link rel="stylesheet" href="/emnapi-docs/assets/style.500e665a.css">
    <link rel="modulepreload" href="/emnapi-docs/assets/chunks/AlgoliaSearchBox.597bd231.js">
    <link rel="modulepreload" href="/emnapi-docs/assets/app.1acbcc36.js">
    <link rel="modulepreload" href="/emnapi-docs/assets/guide_index.md.8ec323bf.lean.js">
    
    <meta name="twitter:title" content="What is emnapi | emnapi">
  <meta property="og:title" content="What is emnapi | emnapi">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/emnapi-docs/" aria-label="emnapi, back to home" data-v-675d8756 data-v-cc01ef16><img class="logo" src="/emnapi-docs/emnapi.svg" alt="Logo" data-v-cc01ef16> emnapi</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/emnapi-docs/guide/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/toyobayashi/node-addon-examples" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Examples <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/toyobayashi/emnapi" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>Languages</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/emnapi-docs/guide/index.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>English</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/emnapi-docs/zh/guide/index.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>简体中文</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/toyobayashi/emnapi-docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Docs Repo <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/emnapi-docs/guide/" data-v-b8818f8c>Guide <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/toyobayashi/node-addon-examples" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Examples <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/toyobayashi/emnapi" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>Languages</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/emnapi-docs/guide/index.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>English</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/emnapi-docs/zh/guide/index.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>简体中文</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/toyobayashi/emnapi-docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Docs Repo <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Guide</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/emnapi-docs/guide/">What is emnapi</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/emnapi-docs/guide/getting-started">Getting Started</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/emnapi-docs/guide/using-cpp">Using C++ Wrapper</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/emnapi-docs/guide/using-cmake">Using CMake</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/emnapi-docs/guide/error-handling">Error Handling</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/emnapi-docs/guide/function-binding">Function Binding</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/emnapi-docs/guide/class-binding">Class Binding</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Advanced</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/emnapi-docs/guide/runtime">emnapi Runtime</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/emnapi-docs/guide/modularization">Modularization</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">API</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/emnapi-docs/reference/list">API List</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/emnapi-docs/reference/additional">Additional APIs</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="what-is-emnapi" tabindex="-1">What is emnapi <a class="header-anchor" href="#what-is-emnapi" aria-hidden="true">#</a></h1><img src="/emnapi-docs/emnapi.svg" alt="emnapi logo" width="256"><p><code>emnapi</code> is a subset of <a href="https://nodejs.org/docs/v16.15.0/api/n-api.html" target="_blank" rel="noopener noreferrer"><strong>N</strong>ode-<strong>API</strong></a> (named NAPI previously) implementation for <strong>Em</strong>scripten.</p><h2 id="motivation" tabindex="-1">Motivation <a class="header-anchor" href="#motivation" aria-hidden="true">#</a></h2><p>I built this library for aiming to be able to build Node-API code to Emscripten WebAssembly without changing your C/C++ code as far as possible.</p><h2 id="why-not-embind" tabindex="-1">Why not <code>embind</code> <a class="header-anchor" href="#why-not-embind" aria-hidden="true">#</a></h2><p><code>embind</code> is pretty good if you don&#39;t need to running same Node-API binding code on both browser and Node.js. Compiling to wasm by using <code>embind</code> can also make your code running on both browser and Node.js, but when targeting Node.js, we prefer compiling to Node.js native addon instead of wasm for native performance. So in this case you probably need to write Node-API binding for Node.js and <code>embind</code> binding for Emscripten WebAssembly. Look, you just want to make your native dependencies could be used in JavaScript world but you are doing duplicated things.</p><p>In fact, <code>emnapi</code> should be slower and more expensive than <code>embind</code> for invoking binding function. But it still be worth to use when you highly expect to share the Node-API binding code.</p><h2 id="browser-compatibility" tabindex="-1">Browser Compatibility <a class="header-anchor" href="#browser-compatibility" aria-hidden="true">#</a></h2><p>Let&#39;s forget IE.</p><p><code>emnapi</code> JavaScript code is all ES5, but requires ES6 globals like <code>WeakMap</code>, and <a href="/emnapi-docs/reference/list.html">some of APIs</a> requires <code>BigInt</code>, <code>WeakRef</code> and <code>FinalizationRegistry</code> which is very new in ECMA Standard, so if you are using those APIs, your code will not work on old browsers or old version Node.js. You can click the link to see which browsers support <a href="https://www.caniuse.com/?search=WeakRef" target="_blank" rel="noopener noreferrer">WeakRef</a> 和 <a href="https://www.caniuse.com/?search=FinalizationRegistry" target="_blank" rel="noopener noreferrer">FinalizationRegistry</a>。Taking Chrome as an example, the recommended target browser version is higher than Chrome 84.</p><h2 id="is-it-ready-for-production" tabindex="-1">Is it ready for production? <a class="header-anchor" href="#is-it-ready-for-production" aria-hidden="true">#</a></h2><p>All Node.js official test passed! The functionality could be guaranteed.</p><p>The performance has not been tested enough, it should be within an acceptable range, use it at your own risk. You can also try to <a href="https://github.com/toyobayashi/emnapi/pulls" target="_blank" rel="noopener noreferrer">make emnapi be better</a>!</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><a class="link" href="https://github.com/toyobayashi/emnapi-docs/edit/main/src/guide/index.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Any mistake found? Correct it now! <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-07c132fc><p class="last-updated" data-v-07c132fc data-v-abce3432><span class="prefix" data-v-abce3432>Last Updated:</span><span class="datetime" data-v-abce3432></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><!----></div><div class="next" data-v-38ede35f><a class="link" href="/emnapi-docs/guide/getting-started" data-v-38ede35f><span class="text" data-v-38ede35f>Getting Started</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"guide_class-binding.md\":\"da5c20b8\",\"guide_error-handling.md\":\"9766ebe1\",\"guide_function-binding.md\":\"4df0d84e\",\"guide_getting-started.md\":\"5f692501\",\"guide_index.md\":\"8ec323bf\",\"guide_modularization.md\":\"9c284d32\",\"guide_runtime.md\":\"e0e69dd0\",\"guide_using-cmake.md\":\"4ef7c4c8\",\"guide_using-cpp.md\":\"55d60bec\",\"index.md\":\"a510aefb\",\"reference_additional.md\":\"c9f38c49\",\"reference_list.md\":\"8313be1a\",\"zh_guide_class-binding.md\":\"276a6134\",\"zh_guide_error-handling.md\":\"d64abc98\",\"zh_guide_function-binding.md\":\"a8b3654a\",\"zh_guide_getting-started.md\":\"3b052611\",\"zh_guide_index.md\":\"3717463c\",\"zh_guide_modularization.md\":\"f01a4839\",\"zh_guide_runtime.md\":\"08972101\",\"zh_guide_using-cmake.md\":\"8f6493c6\",\"zh_guide_using-cpp.md\":\"b73b5529\",\"zh_index.md\":\"c2f792fa\",\"zh_reference_additional.md\":\"ffc16486\",\"zh_reference_list.md\":\"22576c0f\"}")</script>
    <script type="module" async src="/emnapi-docs/assets/app.1acbcc36.js"></script>
    
  </body>
</html>